<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>HTMX</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/choices.js/public/assets/styles/choices.min.css" />
  <script src="https://unpkg.com/htmx.org@1.9.11"></script>

</head>

<body>
  <main class="container">
    <div class="mt-4">Chain drop drown select using <strong>HTMX</strong> and <strong>choices.js</strong></h2>
      <div class=" mt-4">
        <select name="one" hx-get="/getTwo" hx-target="#sub" hx-swap="outerHTML" class="form-select" id="one"
          aria-label="Default">
          <option value="1">One</option>
          <option value="2">Two</option>
          <option value="3">Three</option>
        </select>
      </div>
      <div class=" mt-4" id="sub">
        <select class="form-select" id="two" aria-label="Default">
          <option value="1">One</option>
          <option value="2">Two</option>
          <option value="3">Three</option>
        </select>
      </div>

      <div class=" mt-4" id="sub3">
        <select class="form-select" id="three" aria-label="Default">
          <option value="1">One</option>
          <option value="2">Two</option>
          <option value="3">Three</option>
        </select>
      </div>
  </main>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/choices.js/public/assets/scripts/choices.min.js"></script>

  <script>
    const onedd = document.querySelector('#one');
    const oneddc = new Choices(onedd);

    const twodd = document.querySelector('#two');
    const twoddc = new Choices(twodd);

    const threedd = document.querySelector('#three');
    const threeddc = new Choices(threedd);

    document.body.addEventListener('htmx:afterSwap', function (event) {

      if (event.detail.target.matches('#sub')) {
        const twodd = document.querySelector('#two');
        const twoddc = new Choices(twodd)
      }

      if (event.detail.target.matches('#sub3')) {
        const threedd = document.querySelector('#three');
        const threeddc = new Choices(threedd);
      }

    });

  </script>
</body>

</html>